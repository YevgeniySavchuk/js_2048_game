parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,i,a=!0,l=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(l)throw i}}}}function r(t){return a(t)||i(t)||o(t)||e()}function e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,n){if(t){if("string"==typeof t)return l(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,n):void 0}}function i(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function a(t){if(Array.isArray(t))return l(t)}function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var f=document.querySelector(".start"),c=document.querySelector(".game-score"),u=document.querySelectorAll(".field-cell"),s=document.querySelector(".message-start"),d=document.querySelector(".message-lose"),y=document.querySelector(".message-win");function h(t,n){return r(t).sort(function(){return.5-Math.random()}).slice(0,n)}function v(t){for(var n=m(),e=[],o=0,i=function(i){var a=[];"up"!==t&&"down"!==t||(a=n.filter(function(t,n){return n%4===i})),"left"!==t&&"right"!==t||(a=n.filter(function(t,n){return n<4*(i+1)&&n>=4*i}));var l=a.filter(function(t){return""!==t}),f=a.filter(function(t){return""===t}),c=[];if("left"!==t&&"up"!==t||(c=[].concat(r(l),r(f))),"right"!==t&&"down"!==t||(c=[].concat(r(f),r(l))),"left"!==t&&"right"!==t||e.push.apply(e,r(c)),"up"===t||"down"===t){e.length=16;for(var u=0;u<a.length;u++)e.length=16,e[4*u+o]=c[u];o++}},a=0;a<n.length/4;a++)i(a);p(e)}function g(t){for(var n=m(),e=[],o=0,i=function(i){var a=[];if("up"!==t&&"down"!==t||(a=n.filter(function(t,n){return n%4===i})),"left"!==t&&"right"!==t||(a=n.filter(function(t,n){return n<4*(i+1)&&n>=4*i})),"left"===t||"up"===t)for(var l=1;l<a.length;l++)a[l-1]===a[l]&&""!==a[l-1]&&(a[l-1]=(a[l-1]*=2).toString(),c.innerText="".concat(+c.innerText+ +a[l-1]),a[l]="");if("right"===t||"down"===t)for(var f=a.length;f>0;f--)a[f]===a[f-1]&&""!==a[f]&&(a[f]=(a[f]*=2).toString(),c.innerText="".concat(+c.innerText+ +a[f]),a[f-1]="");if("left"!==t&&"right"!==t||e.push.apply(e,r(a)),"up"===t||"down"===t){e.length=16;for(var u=0;u<a.length;u++)e.length=16,e[4*u+o]=a[u];o++}},a=0;a<n.length/4;a++)i(a);p(e)}function m(){var t,r=[],e=n(b());try{for(e.s();!(t=e.n()).done;){var o=t.value;r.push(o.innerText)}}catch(i){e.e(i)}finally{e.f()}return r}function p(t){var r,e=n(b());try{for(e.s();!(r=e.n()).done;){var o=r.value;o.innerText=t[0],o.className="field-cell",o.classList.add("field-cell--".concat(o.innerText)),t.shift()}}catch(i){e.e(i)}finally{e.f()}}function b(){return document.querySelectorAll(".field-cell")}function S(){var t,e=[],o=n(b());try{for(o.s();!(t=o.n()).done;){var i=t.value;""===i.innerText&&e.push(i)}}catch(f){o.e(f)}finally{o.f()}if(0!==e.length){var a=h(r(Array(e.length).keys()),1),l=h([2,2,2,2,2,2,2,2,2,4],1);return e[a].innerText="".concat(l),e[a].classList.add("field-cell--".concat(l)),e}}function w(){return Array.from(b()).some(function(t){return"2048"===t.innerText})}function T(){if(x())return!0;var r,e=[],o=n(b());try{for(o.s();!(r=o.n()).done;){var i=r.value;e.push(i.innerText)}}catch(d){o.e(d)}finally{o.f()}for(var a=0;a<e.length/4;a++)for(var l=e.slice(4*a,4*a+4),f=1;f<l.length;f++)if(l[f-1]===l[f])return!0;for(var c=function(t){for(var n=e.filter(function(n,r){return r%4===t}),r=1;r<n.length;r++)if(n[r-1]===n[r])return{v:!0}},u=0;u<e.length/4;u++){var s=c(u);if("object"===t(s))return s.v}return!1}function x(){return 0!==Array.from(b()).filter(function(t){return""===t.innerText}).length}f.flag=!1,f.addEventListener("click",function(){var t=h(r(Array(u.length).keys()),2),e=h([2,2,2,2,2,2,2,2,2,4],2);f.flag=!0,c.innerText=0,f.innerText="Restart",f.classList.remove("start"),f.classList.add("restart"),s.classList.add("hidden"),d.classList.add("hidden"),y.classList.add("hidden");var o,i=n(u);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.innerText="",a.className="field-cell"}}catch(l){i.e(l)}finally{i.f()}u[t[0]].innerText="".concat(e[0]),u[t[0]].classList.add("field-cell--".concat(e[0])),u[t[1]].innerText="".concat(e[1]),u[t[1]].classList.add("field-cell--".concat(e[1]))}),document.addEventListener("keydown",function(t){if(!1!==f.flag){var n=JSON.stringify(m());if("ArrowLeft"===t.key&&(v("left"),g("left"),v("left")),"ArrowRight"===t.key&&(v("right"),g("right"),v("right")),"ArrowUp"===t.key&&(v("up"),g("up"),v("up")),"ArrowDown"===t.key&&(v("down"),g("down"),v("down")),w())return y.classList.remove("hidden"),f.flag=!1,f.classList.remove("restart"),f.classList.add("start"),void(f.innerText="Start");n!==JSON.stringify(m())&&S(),T()||(d.classList.remove("hidden"),f.flag=!1)}});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.1db9abfa.js.map